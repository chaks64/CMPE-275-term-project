{"version":3,"file":"index.modern.js","sources":["../src/components/Post.js","../src/components/PostEditor.js","../src/index.js"],"sourcesContent":["import React from 'react'\n\nimport DOMPurify from 'dompurify'\nimport ReactHtmlParser from 'react-html-parser'\nimport Avatar from 'react-avatar'\n\nimport styles from './post.module.css'\n\nconst Post = ({ profileImage, name, content, date, time }) => {\n  const clean = DOMPurify.sanitize(content)\n\n  return (\n    <div className='panel panel-default p-3'>\n      <div className='panel-body'>\n        <div className='row'>\n          <div className='col-2 pr-0'>\n            <Avatar\n              className='float-right'\n              size={50}\n              name={name}\n              src={profileImage}\n            />\n          </div>\n          <div className='col-7'>\n            <p className={`mb-1 ${styles.name}`}>{name}</p>\n            <div className={styles.text}>{ReactHtmlParser(clean)}</div>\n          </div>\n          <div className='col-3'>\n            <p className={`mb-0 text-right ${styles.dateTime}`}>{date}</p>\n            <p className={`mb-0 text-right ${styles.dateTime}`}>{time}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Post\n","import React from 'react'\n\nimport ReactQuill from 'react-quill'\n\nimport './editor.css'\nimport 'react-quill/dist/quill.snow.css'\n\nconst PostEditor = ({ text, setText }) => {\n  const handleChange = (newValue) => {\n    setText(newValue)\n  }\n  return <ReactQuill value={text} onChange={handleChange} />\n}\n\nexport default PostEditor\n","import React, { useState, useEffect } from 'react'\n\nimport PropTypes from 'prop-types'\nimport ReactPaginate from 'react-paginate'\n\nimport Post from './components/Post'\nimport PostEditor from './components/PostEditor'\n\nimport styles from './index.module.css'\n\nconst DiscussionBoard = ({ onSubmit, posts }) => {\n  const [newPost, setNewPost] = useState(false)\n  const [text, setText] = useState('')\n\n  const perPage = 3\n  const [pageCount, setPageCount] = useState(0)\n  const [pagePosts, setPagePosts] = useState([])\n  const [currentPage, setCurrentPage] = useState(0)\n\n  useEffect(() => {\n    setPageCount(Math.ceil(posts.length / perPage))\n\n    if (posts.length % perPage !== 0 && posts.length > perPage) {\n      setPagePosts(\n        posts.slice(\n          posts.length - (posts.length % perPage) - 1,\n          posts.length - 1\n        )\n      )\n\n      setCurrentPage(pageCount - 1)\n    } else if (posts.length % perPage === 0 && posts.length > perPage) {\n      setPagePosts(posts.slice(posts.length - perPage, posts.length))\n      setCurrentPage(pageCount)\n    } else {\n      setPagePosts(posts.slice(0, perPage))\n      setCurrentPage(0)\n    }\n\n    return () => {\n      setPagePosts([])\n    }\n  }, [posts])\n\n  const clickNewPost = () => {\n    setNewPost(true)\n  }\n\n  const buildDate = (date) => {\n    const months = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December'\n    ]\n    return (\n      months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear()\n    )\n  }\n\n  const addZero = (i) => {\n    if (i < 10) {\n      i = '0' + i\n    }\n    return i\n  }\n\n  const buildTime = (date) => {\n    let hours = date.getHours()\n    let mornOrNight = 'AM'\n\n    if (hours > 12 && hours < 24) {\n      hours -= 12\n      mornOrNight = 'PM'\n    }\n\n    return (\n      addZero(hours) +\n      ':' +\n      addZero(date.getMinutes()) +\n      ' ' +\n      mornOrNight +\n      ' ' +\n      date.toLocaleTimeString('en-us', { timeZoneName: 'short' }).split(' ')[2]\n    )\n  }\n\n  const submitPost = () => {\n    onSubmit(text)\n    setNewPost(false)\n    setText('')\n  }\n\n  const onPageChange = ({ selected }) => {\n    let offset = Math.ceil(selected * perPage)\n    setPagePosts(posts.slice(offset, offset + perPage))\n    setCurrentPage(selected)\n  }\n\n  const displayEditor = () => {\n    return (\n      <React.Fragment>\n        <div className='row'>\n          <div className='col'>\n            <PostEditor text={text} setText={setText} />\n          </div>\n        </div>\n        <div className='row pt-2'>\n          <div className='col'>\n            <button onClick={submitPost} className='btn btn-primary'>\n              Submit\n            </button>\n          </div>\n        </div>\n      </React.Fragment>\n    )\n  }\n\n  return (\n    <div className='container'>\n      <a\n        onClick={clickNewPost}\n        className={`pl-3 text-decoration-none ${styles.newPost}`}\n      >\n        Add New Post\n      </a>\n      {pagePosts.map((post, idx) => {\n        const newDate = buildDate(post.date)\n        const newTime = buildTime(post.date)\n\n        return (\n          <React.Fragment key={idx}>\n            <Post {...post} date={newDate} time={newTime} />\n            <hr className={`mt-0`} />\n          </React.Fragment>\n        )\n      })}\n\n      {newPost ? displayEditor() : ''}\n\n      <div className='d-flex justify-content-center mt-5'>\n        <ReactPaginate\n          pageCount={pageCount}\n          pageRangeDisplayed={5}\n          marginPagesDisplayed={5}\n          previousLabel='Previous'\n          nextLabel='Next'\n          breakLabel='...'\n          breakClassName='page-item'\n          onPageChange={onPageChange}\n          forcePage={currentPage}\n          containerClassName='pagination'\n          pageClassName='page-item'\n          pageLinkClassName='page-link'\n          previousClassName='page-item'\n          nextClassName='page-item'\n          previousLinkClassName='page-link'\n          nextLinkClassName='page-link'\n        />\n      </div>\n    </div>\n  )\n}\n\nDiscussionBoard.defaultProps = {\n  posts: []\n}\n\nDiscussionBoard.propTypes = {\n  posts: PropTypes.array,\n  onSubmit: PropTypes.func\n}\n\nexport default DiscussionBoard\n"],"names":["Post","profileImage","name","content","date","time","clean","DOMPurify","sanitize","React","className","Avatar","size","src","ReactHtmlParser","PostEditor","text","setText","ReactQuill","value","onChange","newValue","DiscussionBoard","onSubmit","posts","newPost","setNewPost","useState","pageCount","setPageCount","pagePosts","setPagePosts","currentPage","setCurrentPage","useEffect","Math","ceil","length","slice","addZero","i","onClick","map","post","idx","newDate","getMonth","getDate","getFullYear","newTime","hours","getHours","mornOrNight","getMinutes","toLocaleTimeString","timeZoneName","split","buildTime","Fragment","key","ReactPaginate","pageRangeDisplayed","marginPagesDisplayed","previousLabel","nextLabel","breakLabel","breakClassName","onPageChange","selected","offset","forcePage","containerClassName","pageClassName","pageLinkClassName","previousClassName","nextClassName","previousLinkClassName","nextLinkClassName","defaultProps","propTypes","PropTypes","array","func"],"mappings":"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"}